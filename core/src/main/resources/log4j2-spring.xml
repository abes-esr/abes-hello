<?xml version="1.0" encoding="UTF-8"?>
<Configuration>
    <Appenders>
        <!-- On décrit les supports de sorties -->
        <Console name="Console">
            <PatternLayout
                    pattern="%style{%d{ISO8601}}{black} %highlight{%-5level }[%style{%t}{bright,blue}] %style{%C{1.}}{dark,yellow}: %msg%n%throwable" />
        </Console>

        <RollingFile name="LogFile"
                     fileName="../logs/helloabes.log"
                     filePattern="../logs/$${date:yyyy-MM}/helloabes_%d{dd-MM-yyyy}_%i.log.gz">
            <PatternLayout>
                <pattern>%5p %d{ISO8601} [%t][%x] %c - %m%n</pattern>
            </PatternLayout>
            <Policies>
                <!--Nouveau fichier si le fichier courant dépasse 10MB -->
                <SizeBasedTriggeringPolicy size="10 MB" />
                <!-- Nouveau fichier si le jour est different -->
                <TimeBasedTriggeringPolicy />
            </Policies>
        </RollingFile>

        <RollingFile name="ErrorFile"
                     fileName="../logs/error.log"
                     filePattern="../logs/$${date:yyyy-MM}/error_%d{dd-MM-yyyy}_%i.log.gz">
            <PatternLayout>
                <pattern>%5p %d{ISO8601} [%t][%x] %c - %m%n</pattern>
            </PatternLayout>
            <Policies>
                <!--Nouveau fichier si le fichier courant dépasse 10MB -->
                <SizeBasedTriggeringPolicy size="10 MB" />
                <!-- Nouveau fichier si le jour est different -->
                <TimeBasedTriggeringPolicy />
            </Policies>
        </RollingFile>

        <RollingFile name="DebugFile"
                     fileName="../logs/debug.log"
                     filePattern="../logs/$${date:yyyy-MM}/debug_%d{dd-MM-yyyy}_%i.log.gz">
            <PatternLayout>
                <pattern>%5p %d{ISO8601} [%t][%x] %c - %m%n</pattern>
            </PatternLayout>
            <Policies>
                <!--Nouveau fichier si le fichier courant dépasse 10MB -->
                <SizeBasedTriggeringPolicy size="10 MB" />
                <!-- Nouveau fichier si le jour est different -->
                <TimeBasedTriggeringPolicy />
            </Policies>
        </RollingFile>

    </Appenders>

    <Loggers>
        <!-- On décrit l'utilisation des supports -->

        <Logger name="fr.abes" level="debug">
            <!-- Pour les paquets dans fr.abes, on écrit un journal pour les erreurs et un journal pour les boggues -->
            <AppenderRef ref="ErrorFile" level="error" />
            <AppenderRef ref="DebugFile" level="debug" />
        </Logger>

        <!-- Pour le niveau INFO, on écrit dans la console et le log -->
        <Root level="info">
            <AppenderRef ref="Console"/>
            <AppenderRef ref="LogFile"/>
        </Root>
    </Loggers>

</Configuration>